var JSParser=Editor.Parser=function(){function e(e,f){function T(a,b){a=="variable"&&(x(b),s())}function S(a,b){a=="variable"?(x(b),s(S)):a=="("&&s(z(")"),v,K(T,")"),A,E,w)}function R(a){a==")"?t():s(F)}function Q(a,b){a==";"?s(R):b=="in"?s(F):s(F,B(";"),R)}function P(a,b){b=="in"?s(F):s(G,Q)}function O(a){a=="var"?s(M,Q):a==";"?t(Q):a=="variable"?s(P):t(Q)}function N(a,b){b=="="?s(F,N):a==","&&s(M)}function M(a,b){a=="variable"?(x(b),s(N)):s()}function L(a){a=="}"?s():t(E,L)}function K(a,b){function c(d){d==","?s(a,c):d==b?s():s(B(b))}return function(d){d==b?s():t(a,c)}}function J(b){b=="variable"&&u("js-property"),a.hasOwnProperty(b)&&s(B(":"),F)}function I(a){a=="variable"&&(u("js-property"),s())}function H(a){a==":"?s(A,E):t(G,B(";"),A)}function G(a,b){a=="operator"&&/\+\+|--/.test(b)?s(G):a=="operator"?s(F):a==";"?t():a=="("?s(z(")"),K(F,")"),A,G):a=="."?s(I,G):a=="["&&s(z("]"),F,B("]"),A,G)}function F(b){a.hasOwnProperty(b)?s(G):b=="function"?s(S):b=="keyword c"?s(F):b=="("?s(z(")"),F,B(")"),A,G):b=="operator"?s(F):b=="["?s(z("]"),K(F,"]"),A,G):b=="{"?s(z("}"),K(J,"}"),A,G):s()}function E(a){a=="var"?s(z("vardef"),M,B(";"),A):a=="keyword a"?s(z("form"),F,E,A):a=="keyword b"?s(z("form"),E,A):a=="{"?s(z("}"),L,A):a==";"?s():a=="function"?s(S):a=="for"?s(z("form"),B("("),z(")"),O,B(")"),A,E,A):a=="variable"?s(z("stat"),H):a=="switch"?s(z("form"),F,z("}","switch"),B("{"),L,A,A):a=="case"?s(F,B(":")):a=="default"?s(B(":")):a=="catch"?s(z("form"),v,B("("),T,B(")"),E,A,w):t(z("stat"),F,B(";"),A)}function D(a){return t(F,D)}function C(a){return t(E,C)}function B(a){return function(b){b==a?s():a==";"?t():s(arguments.callee)}}function A(){j.type==")"&&(l=j.indented),j=j.prev}function z(a,b){var d=function(){j=new c(l,k,a,null,j,b)};d.lex=!0;return d}function y(a){var b=i;while(b){if(b.vars[a])return!0;b=b.prev}return!1}function x(a){i&&(u("js-variabledef"),i.vars[a]=!0)}function w(){i=i.prev}function v(){i={prev:i,vars:{"this":!0,arguments:!0}}}function u(a){n=a}function t(){r(arguments),m=!1}function s(){r(arguments),m=!0}function r(a){for(var b=a.length-1;b>=0;b--)h.push(a[b])}function q(){var a=i,b=j,c=h.concat([]),d=g.state;return function(e){i=a,j=b,h=c.concat([]),k=l=0,g=tokenizeJavaScript(e,d);return o}}function p(){while(h[h.length-1].lex)h.pop()();var a=g.next();a.type=="whitespace"&&k==0&&(l=a.value.length),k+=a.value.length,a.content=="\n"&&(l=k=0,"align"in j||(j.align=!1),a.indentation=d(j));if(a.type=="whitespace"||a.type=="comment")return a;"align"in j||(j.align=!0);for(;;){m=n=!1,h.pop()(a.type,a.content);if(m){n?a.style=n:a.type=="variable"&&y(a.content)&&(a.style="js-localvariable");return a}}}var g=tokenizeJavaScript(e),h=[b?D:C],i=null,j=new c((f||0)-indentUnit,0,"block",!1),k=0,l=0,m,n,o={next:p,copy:q};A.lex=!0;return o}function d(a){return function(b){var c=b&&b.charAt(0),d=a.type,e=c==d;return d=="vardef"?a.indented+4:d=="form"&&c=="{"?a.indented:d=="stat"||d=="form"?a.indented+indentUnit:a.info=="switch"&&!e?a.indented+(/^(?:case|default)\b/.test(b)?indentUnit:2*indentUnit):a.align?a.column-(e?1:0):a.indented+(e?0:indentUnit)}}function c(a,b,c,d,e,f){this.indented=a,this.column=b,this.type=c,d!=null&&(this.align=d),this.prev=e,this.info=f}var a={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},b=!1;return{make:e,electricChars:"{}:",configure:function(a){a.json!=null&&(b=a.json)}}}()