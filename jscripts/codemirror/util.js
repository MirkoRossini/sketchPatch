function isSpan(a){var b=a.nodeName;return b=="SPAN"||b=="span"}function isBR(a){var b=a.nodeName;return b=="BR"||b=="br"}function nodeTop(a){var b=0;while(a.offsetParent)b+=a.offsetTop,a=a.offsetParent;return b}function nodeText(a){return a.textContent||a.innerText||a.nodeValue||""}function addEventHandler(a,b,c,d){function e(a){c(normalizeEvent(a||window.event))}if(typeof a.addEventListener=="function"){a.addEventListener(b,e,!1);if(d)return function(){a.removeEventListener(b,e,!1)}}else{a.attachEvent("on"+b,e);if(d)return function(){a.detachEvent("on"+b,e)}}}function normalizeEvent(a){a.stopPropagation||(a.stopPropagation=function(){this.cancelBubble=!0},a.preventDefault=function(){this.returnValue=!1}),a.stop||(a.stop=function(){this.stopPropagation(),this.preventDefault()}),a.type=="keypress"&&(a.code=a.charCode==null?a.keyCode:a.charCode,a.character=String.fromCharCode(a.code));return a}function isAncestor(a,b){while(b=b.parentNode)if(a==b)return!0;return!1}function clearElement(a){while(a.firstChild)a.removeChild(a.firstChild)}function removeElement(a){a.parentNode&&a.parentNode.removeChild(a)}function insertAfter(a,b){var c=b.parentNode;c.insertBefore(a,b.nextSibling);return a}function removeClass(a,b){a.className=a.className.replace(new RegExp(" "+b+"\\b","g"),"");return a}function hasClass(a,b){var c=a.className;return c&&(new RegExp("(^| )"+b+"($| )")).test(c)}function matcher(a){return function(b){return a.test(b)}}function map(a,b){var c=[];forEach(a,function(a){c.push(b(a))});return c}function forEach(a,b){if(a.next)try{for(;;)b(a.next())}catch(c){if(c!=StopIteration)throw c}else for(var d=0;d<a.length;d++)b(a[d])}function method(a,b){return function(){a[b].apply(a,arguments)}}var StopIteration={toString:function(){return"StopIteration"}},nbsp="\u00a0",matching={"{":"}","[":"]","(":")","}":"{","]":"[",")":"("}