function tokenizer(a,b){function c(a){return a!="\n"&&/^[\s\u00a0]*$/.test(a)}var d={state:b,take:function(b){typeof b=="string"&&(b={style:b,type:b}),b.content=(b.content||"")+a.get(),/\n$/.test(b.content)||a.nextWhile(c),b.value=b.content+a.get();return b},next:function(){if(!a.more())throw StopIteration;var b;if(a.equals("\n")){a.next();return this.take("whitespace")}if(a.applies(c))b="whitespace";else while(!b)b=this.state(a,function(a){d.state=a});return this.take(b)}};return d}