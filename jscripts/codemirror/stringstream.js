var stringStream=function(a){function e(){while(c==b.length){d+=b,b="",c=0;try{b=a.next()}catch(e){if(e!=StopIteration)throw e;return!1}}return!0}var b="",c=0,d="";return{peek:function(){if(!e())return null;return b.charAt(c)},next:function(){if(!e())throw d.length>0?"End of stringstream reached without emptying buffer ('"+d+"').":StopIteration;return b.charAt(c++)},get:function(){var a=d;d="",c>0&&(a+=b.slice(0,c),b=b.slice(c),c=0);return a},push:function(a){b=b.slice(0,c)+a+b.slice(c)},lookAhead:function(e,f,g,h){function i(a){return h?a.toLowerCase():a}e=i(e);var j=!1,k=d,l=c;g&&this.nextWhileMatches(/[\s\u00a0]/);for(;;){var m=c+e.length,n=b.length-c;if(m<=b.length){j=e==i(b.slice(c,m)),c=m;break}if(e.slice(0,n)!=i(b.slice(c)))break;d+=b,b="";try{b=a.next()}catch(o){if(o!=StopIteration)throw o;break}c=0,e=e.slice(n)}if(!j||!f)b=d.slice(k.length)+b,c=l,d=k;return j},lookAheadRegex:function(d,e){if(d.source.charAt(0)!="^")throw new Error("Regexps passed to lookAheadRegex must start with ^");while(b.indexOf("\n",c)==-1)try{b+=a.next()}catch(f){if(f!=StopIteration)throw f;break}var g=b.slice(c).match(d);g&&e&&(c+=g[0].length);return g},more:function(){return this.peek()!==null},applies:function(a){var b=this.peek();return b!==null&&a(b)},nextWhile:function(a){var b;while((b=this.peek())!==null&&a(b))this.next()},matches:function(a){var b=this.peek();return b!==null&&a.test(b)},nextWhileMatches:function(a){var b;while((b=this.peek())!==null&&a.test(b))this.next()},equals:function(a){return a===this.peek()},endOfLine:function(){var a=this.peek();return a==null||a=="\n"}}}